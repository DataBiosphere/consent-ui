<div ng-include src="'app/header/header.html'"></div>
<div class="container">
    <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-12 col-xs-12">
        <h2 class="cm-title common-color">
            <div id="dacUser">Your Profile</div>
            <small>Please complete the following information to be able to request access to dataset(s)</small>
        </h2>
        <hr class="section-separator">
    </div>
    <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-12 col-xs-12 no-padding">
      <form name="researcherForm" novalidate>
        <div class="form-group">

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Full Name*</label>
                <input type="text"  class="form-control" name="profileName" id="profileName" ng-model="formData.profileName">
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Academic/Business Email Address*</label>
                <input type="email" class="form-control" name="profileAcademicEmail" id="profileAcademicEmail" ng-model="formData.academicEmail"  ng-class="researcherForm.profileAcademicEmail.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>
            <span class="cancel-color required-field-error-span" ng-show="researcherForm.profileAcademicEmail.$invalid && showValidationMessages">
                <span>Email Address is empty or has invalid format</span>
            </span>

            <div class="display-inline-block" style="padding: 0 15px;">
                <label class="control-label">NIH eRA Commons ID <span class="italic">(optional)</span></label>
                <!-- <div ng-show="formData.eraStatus"> -->
                <div ng-show="true">
                    <a ng-click="RPApplication.redirectToNihLogin()" target="_blank" class="auth-button eRACommons">
                        <div class="logo"></div>
                        <span>Authenticate your account</span>
                    </a>
                </div>
                <div ng-show="!formData.eraStatus">
                    <a href="{{formData.eraLink}}" class="hover-color auth-link">{{formData.eraId}}</a>
                </div>
            </div>

            <div class="display-inline-block" ng-show="formData.eraStatus">
                <div ng-show="eraExpirationCount !== 0" class="default-color">Your NIH eRA Commons authentication will expire in {{eraExpirationCount}} days</div>
                <div ng-show="eraExpirationCount === 0" class="default-color">Your NIH eRA Commons authentication expired</div>
                <a ng-click="RPApplication.redirectToNihLogin()" target="_blank" class="hover-color auth-link">Re-authenticate your account</a>
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Institution Name*</label>
                <input type="text" class="form-control" name="profileInstitution" id="profileInstitution" ng-model="formData.institution" ng-class="researcherForm.profileInstitution.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <label class="control-label">Department*</label>
                <input type="text" class="form-control" name="profileDepartment" id="profileDepartment"  ng-model="formData.department" ng-class="researcherForm.profileDepartment.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <label class="control-label">Division <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profileDivision" id="profileDivision" ng-model="formData.division">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <label class="control-label">Street Address 1*</label>
                <input type="text" class="form-control" name="profileAddress1" id="profileAddress1" ng-model="formData.address1" ng-class="researcherForm.profileAddress1.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <label class="control-label">Street Address 2 <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profileAddress2" id="profileAddress2"  ng-model="formData.address2">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <label class="control-label">City*</label>
                <input type="text" class="form-control" name="profileCity" id="profileCity" ng-model="formData.city" ng-class="researcherForm.profileCity.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <label class="control-label">State <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profileState" id="profileState" ng-model="formData.state">
            </div>

            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                <label class="control-label">Zip/Postal Code*</label>
                <input type="text" class="form-control" name="profileZip" id="profileZip"  ng-model="formData.zipcode" ng-class="researcherForm.profileZip.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                <label class="control-label">Country*</label>
                <input type="text" class="form-control" name="profileCountry" id="profileCountry" ng-model="formData.country" ng-class="researcherForm.profileCountry.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'" required>
            </div>
        </div>

        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 rp-group">
                <label ng-class="researcherForm.isThePI.$invalid && showValidationMessages ? 'cancel-color control-label' : 'control-label'">Are you the Principal Investigator?*

                        <span class="glyphicon glyphicon-question-sign tooltip-icon" tooltip-class="tooltip-class-dark" tooltip-trigger tooltip-placement="right"
                        tooltip="This information is required in order to classify users as bonafide researchers as part of the process of Data Access approvals."></span></label>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 rp-group">
                <div class="radio-inline">
                    <input ng-model="formData.isThePI" ng-value=true type="radio" class="regular-radio" id="isThePI" name="isThePI" ng-click="ResearcherProfile.clearNotRelatedPIFields();" required>
                    <label for="isThePI"></label>
                    <label for="isThePI" class="radio-button-text">Yes</label>

                    <input ng-model="formData.isThePI" ng-value=false type="radio" class="regular-radio" id="isNotThePI" name="isThePI" ng-click="ResearcherProfile.clearNotRelatedPIFields();" required>
                    <label for="isNotThePI"></label>
                    <label for="isNotThePI" class="radio-button-text">No</label>
                </div>
            </div>
        </div>

        <div ng-show="formData.isThePI == false" class="form-group">
            <span class="cancel-color required-field-error-span" ng-show="researcherForm.havePI.$invalid && showValidationMessages">
                <span>* Required field</span>
            </span>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 rp-group">
                <label ng-class="researcherForm.havePI.$invalid && showValidationMessages ? 'cancel-color control-label' : 'control-label'">Do you have a Principal Investigator?*</label>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 rp-group">
                <div class="radio-inline"  ng-disabled="formData.isThePI != false">
                    <input ng-model="formData.havePI" ng-value=true type="radio" class="regular-radio" id="doHavePI" name="havePI" ng-click="ResearcherProfile.clearCommonsFields();" ng-disabled="formData.isThePI != false" ng-required="formData.isThePI == false">
                    <label for="doHavePI"></label>
                    <label for="doHavePI" class="radio-button-text">Yes</label>

                    <input ng-model="formData.havePI" ng-value=false type="radio" class="regular-radio" id="doNotHavePI" name="havePI" ng-click="ResearcherProfile.clearNoHasPIFields();" ng-disabled="formData.isThePI != false" ng-required="formData.isThePI == false">
                    <label for="doNotHavePI"></label>
                    <label for="doNotHavePI" class="radio-button-text">No</label>
                </div>
            </div>
        </div>

        <div ng-show="formData.havePI == true" class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Principal Investigator Name*</label>
                <input type="text" class="form-control" name="profilePIName" id="profilePIName" ng-model="formData.piName" ng-required="formData.havePI === true" ng-class="researcherForm.profilePIName.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'">
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Principal Investigator Email Address*</label>
                <input type="email" class="form-control" name="profilePIEmail" id="profilePIEmail" ng-model="formData.piEmail" ng-required="formData.havePI === true" ng-required="formData.havePI === true" ng-class="researcherForm.profilePIEmail.$invalid && showValidationMessages ? 'form-control required-field-error' : 'form-control'">
            </div>
            <span class="cancel-color required-field-error-span" ng-show="researcherForm.profilePIEmail.$invalid && showValidationMessages">
                <span>Email Address is empty or has invalid format</span>
            </span>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">eRA Commons ID <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profileEraCommons" id="profileEraCommons" ng-model="formData.eRACommonsID">
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Pubmed ID of a publication <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profilePubmedID" id="profilePubmedID"  ng-model="formData.pubmedID">
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">URL of a scientific publication <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profileScientificURL" id="profileScientificURL" ng-model="formData.scientificURL" >
            </div>
        </div>

        <div ng-show="formData.isThePI == true || formData.havePI == false" class="form-group">
            <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">Pubmed ID of a publication <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profilePubmedID"  ng-model="formData.pubmedID">
            </div>

            <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <label class="control-label">URL of a scientific publication <span class="italic">(optional)</span></label>
                <input type="text" class="form-control" name="profileScientificURL" ng-model="formData.scientificURL" >
            </div>
        </div>

        <ul class="no-style-list">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 multi-step-pager">
                <li class="italic default-color">*Required field</li>
                <li ng-if="!formData.completed" class="f-right multi-step-next">
                    <a ng-disabled="researcherForm.$invalid" href="" ng-click="ResearcherProfile.submit();" class="common-background">Submit</a>
                </li>
                <li ng-if="!formData.completed" class="f-right multi-step-save">
                    <a href="" ng-click="ResearcherProfile.saveProfile();" class="common-color">Continue later</a>
                </li>
                <li ng-if="formData.completed" class="f-right multi-step-next">
                    <a href="" ng-click="ResearcherProfile.submit();" class="common-background">Update</a>
                </li>
            </div>
        </ul>
      </form>
    </div>
</div>
